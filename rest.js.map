{"version":3,"file":"rest.js","sourceRoot":"","sources":["rest.ts"],"names":[],"mappings":";;IAMA;QAMI,uBAAQ,GAAR,UAAS,MAAa;YAClB,MAAM,IAAI,KAAK,CAAC,2BAAyB,MAAM,CAAC,QAAQ,EAAI,CAAC,CAAC;QAClE,CAAC;;;;QACL,WAAC;QAPG,cAAY,IAAI,EAAC,OAAY;YACzB,kBAAO,CAAC;YACR,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACrB,CAAC;IAIL,CAAC,AATD,IASC;;IATD,2BASC,CAAA;IACD;QAII,uBAAQ,GAAR,UAAS,MAAa;YAClB,EAAE,CAAA,CAAC,MAAM,YAAY,yBAAW,CAAC,CAAA,CAAC;gBAC9B,kBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACjD,CAAC;YAAA,IAAI,CAAA,CAAC;gBACF,MAAM,IAAI,KAAK,CAAC,2BAAyB,MAAM,CAAC,QAAQ,EAAI,CAAC,CAAC;YAClE,CAAC;QACL,CAAC;;;;QACL,WAAC;QAVG,cAAY,IAAW,EAAC,OAAY;YAChC,mBAAM,IAAI,CAAC,CAAC;QAChB,CAAC;IAQL,CAAC,AAXD,IAWC;;IAXD,2BAWC,CAAA;IACD;QAMI,4BAAQ,GAAR,UAAS,MAAa;YAClB,EAAE,CAAA,CAAC,MAAM,YAAY,yBAAW,CAAC,CAAA,CAAC;gBAC9B,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;gBACxC,qBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACtD,CAAC;YAAA,IAAI,CAAA,CAAC;gBACF,MAAM,IAAI,KAAK,CAAC,2BAAyB,MAAM,CAAC,QAAQ,EAAI,CAAC,CAAC;YAClE,CAAC;QACL,CAAC;;;;QACL,gBAAC;QAZG,mBAAY,IAAW,EAAC,OAAY;YAChC,mBAAM,IAAI,CAAC,CAAC;YACZ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAC3B,CAAC;IASL,CAAC,AAdD,IAcC;;IAdD,qCAcC,CAAA;IAKD;QAMW,aAAM,GAAb,UAAc,KAAK,EAAC,MAAU,EAAC,OAAU;YAArB,sBAAU,GAAV,YAAU;YAAC,uBAAU,GAAV,YAAU;YACrC,MAAM,CAAC,IAAI,MAAM,CAAC,KAAK,EAAC,MAAM,EAAC,OAAO,CAAC,CAAC;QAC5C,CAAC;QAOL,aAAC;QALG,gBAAY,KAAK,EAAC,MAAU,EAAC,OAAU;YAArB,sBAAU,GAAV,YAAU;YAAC,uBAAU,GAAV,YAAU;YACnC,IAAI,CAAC,KAAK,GAAC,KAAK,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAC3B,CAAC;IACL,CAAC,AAfD,IAeC;;IAfD,+BAeC,CAAA;;;;;;;;;;;;;;;;;;;YAxDD,mBAAA,KAA0B,sBASzB;YACD,mBAAA,KAA0B,IAWzB;YACD,wBAAA,UAA+B,IAc9B;YAKD,qBAAA,MAeC","sourcesContent":["import {RestHandler} from './handlers/rest';\nimport {Decorator} from \"runtime/decorators\";\nimport {Member} from \"runtime/reflect/member\";\nimport {Constructor} from \"runtime/reflect/constructor\";\nimport {WebSocketHandler} from \"./handlers/ws\";\n\nexport class Path extends Decorator {\n    public path:string;\n    constructor(path,options?:any){\n        super();\n        this.path = path;\n    }\n    decorate(member:Member){\n        throw new Error(`Invalid 'Rest' target ${member.toString()}`);\n    }\n}\nexport class Rest extends Path {\n    constructor(path:string,options?:any){\n        super(path);\n    }\n    decorate(member:Member){\n        if(member instanceof Constructor){\n            RestHandler.register(this.path,member.owner);\n        }else{\n            throw new Error(`Invalid 'Rest' target ${member.toString()}`);\n        }\n    }\n}\nexport class WebSocket extends Path {\n    public options:any;\n    constructor(path:string,options?:any){\n        super(path);\n        this.options = options;\n    }\n    decorate(member:Member){\n        if(member instanceof Constructor){\n            member.owner.metadata.ws = this.options;\n            WebSocketHandler.register(this.path,member.owner);\n        }else{\n            throw new Error(`Invalid 'Rest' target ${member.toString()}`);\n        }\n    }\n}\n\n\n\n\nexport class Result {\n\n    public value:any;\n    public status:any;\n    public headers:any;\n\n    static create(value,status=200,headers={}){\n        return new Result(value,status,headers);\n    }\n\n    constructor(value,status=200,headers={}){\n        this.value=value;\n        this.status = status;\n        this.headers = headers;\n    }\n}\n"]}